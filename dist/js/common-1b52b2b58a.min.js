var data={loginState:!1,chatRoomList:[],chatSocket:null,roomSocket:null,userInfo:null},mixins={data:function(){return{}},methods:{setSessionStorage:function(t,o){sessionStorage.setItem(t,o)},getSessionStorage:function(t){return sessionStorage.getItem(t)},deleteSessionStorage:function(t){storage.removeItem(t)},getHeader:function(t){return(t=t||{}).authorization=this.getSessionStorage("authorizationToken"),t}}},util={setUserInfo:function(t){t&&(this.userInfo=t)},setLoginState:function(t){this.loginState=t},isLogin:function(o,e){console.log("_isLogin check called"),this.$http({url:"/v1/login-check",headers:this.getHeader(),method:"get"}).then($.proxy(function(t){this.loginState=null!==t.data.data.info,this.userInfo=t.data.data.info,o&&o()},this)).catch($.proxy(function(t){this.loginState=!1,this.$EventBus.$emit("showAlert",t.response.data.data,t.response.data.code),e&&e()},this))},setCookie:function(t,o,e){var n=new Date;n.setTime(n.getTime()+24*e*60*60*1e3),document.cookie=t+"="+o+";expires="+n.toUTCString()+";path=/"},getCookie:function(t){var o=document.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)");return o?o[2]:null},deleteCookie:function(t){document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"},getRoomList:function(t){console.log("getRoomList"),this.$http({url:"/v1/room-list",headers:this.getHeader(),method:"get"}).then($.proxy(function(t){this.chatRoomList=t.data.data,console.log(this.chatRoomList),this.socketInit(this.chatRoomList)},this)).catch($.proxy(function(t){console.log(t.response)},this))},socketInit:function(t,o){console.log("socketInit called"),console.log(t),t.forEach($.proxy(function(t,o){console.log("roomList.forEach idx : "+o+" room id : "+t.id),this.connectChatSocket(t.id),this.bindSocketEvetn(this.chatSocket)},this)),console.log("this.roomSocket test"),this.connectRoomSocket(),o&&o()},connectRoomSocket:function(){this.roomSocket=io.connect("http://localhost:3000/room",{path:"/v-chat"}),this.roomSocket.on("new",$.proxy(function(t){console.log("new room !!!!!!"),console.log(this.chatRoomList),console.log(t),this.chatRoomList.push(t),console.log("new room added!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),console.log(this.chatRoomList),this.connectChatSocket(t.id),this.bindSocketEvetn(this.chatSocket)},this))},connectChatSocket:function(t){console.log("connectSocket called : "+t),this.chatSocket=io("http://localhost:3000/chat?roomId="+t,{query:"roomId="+t,path:"/v-chat"})},bindSocketEvetn:function(t){t.on("new",$.proxy(function(t){},this)),t.on("join",$.proxy(function(t){},this)),t.on("chat",$.proxy(function(t,o){0<=this.$router.currentRoute.path.indexOf("/chat/")?this.$EventBus.$emit("newchat",t):this.$EventBus.$emit("showAlert",t.chat,o.email,"blue",o.id)},this))}};